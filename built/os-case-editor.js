/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

//     jquery-meta-data
//     (c) simonfan
//     jquery-meta-data is licensed under the MIT terms.

//     Q
//     (c) simonfan
//     Q is licensed under the MIT terms.

//     scope
//     (c) simonfan
//     scope is licensed under the MIT terms.

//     archetypo
//     (c) simonfan
//     archetypo is licensed under the MIT terms.

/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

//     dock
//     (c) simonfan
//     dock is licensed under the MIT terms.

//     bb-dock
//     (c) simonfan
//     bb-dock is licensed under the MIT terms.

//     OsCaseEditor
//     (c)
//     OsCaseEditor is licensed under the MIT terms.

!function(e){if("function"==typeof bootstrap)bootstrap("promise",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define("q",e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function e(e){return function(){return K.apply(e,arguments)}}function t(e){return e===Object(e)}function n(e){return"[object StopIteration]"===tt(e)||e instanceof U}function r(e,t){if(L&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(nt)){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var i=n.join("\n"+nt+"\n");e.stack=o(i)}}function o(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var o=t[r];u(o)||i(o)||!o||n.push(o)}return n.join("\n")}function i(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function a(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function u(e){var t=a(e);if(!t)return!1;var n=t[0],r=t[1];return n===$&&r>=B&&at>=r}function s(){if(L)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=a(n);if(!r)return;return $=r[0],r[1]}}function c(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function p(e){return y(e)?e:g(e)?S(e):R(e)}function f(){function e(e){t=e,i.source=e,Q(n,function(t,n){V(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],o=Z(f.prototype),i=Z(h.prototype);if(i.promiseDispatch=function(e,o,i){var a=J(arguments);n?(n.push(a),"when"===o&&i[1]&&r.push(i[1])):V(function(){t.promiseDispatch.apply(t,a)})},i.valueOf=function(){if(n)return i;var e=m(t);return y(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},p.longStackSupport&&L)try{throw new Error}catch(a){i.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){t||e(p(n))},o.fulfill=function(n){t||e(R(n))},o.reject=function(n){t||e(q(n))},o.notify=function(e){t||Q(r,function(t,n){V(function(){n(e)})},void 0)},o}function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=f();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function d(e){return l(function(t,n){for(var r=0,o=e.length;o>r;r++)p(e[r]).then(t,n)})}function h(e,t,n){void 0===t&&(t=function(e){return q(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=Z(h.prototype);if(r.promiseDispatch=function(n,o,i){var a;try{a=e[o]?e[o].apply(r,i):t.call(r,o,i)}catch(u){a=q(u)}n&&n(a)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function v(e,t,n,r){return p(e).then(t,n,r)}function m(e){if(y(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function y(e){return t(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function g(e){return t(e)&&"function"==typeof e.then}function x(e){return y(e)&&"pending"===e.inspect().state}function b(e){return!y(e)||"fulfilled"===e.inspect().state}function j(e){return y(e)&&"rejected"===e.inspect().state}function w(){rt.length=0,ot.length=0,it||(it=!0)}function k(e,t){it&&(ot.push(e),rt.push(t&&"undefined"!=typeof t.stack?t.stack:"(no stack) "+t))}function _(e){if(it){var t=G(ot,e);-1!==t&&(ot.splice(t,1),rt.splice(t,1))}}function q(e){var t=h({when:function(t){return t&&_(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return k(t,e),t}function R(e){return h({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return et(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function S(e){var t=f();return V(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function A(e){return h({isDef:function(){}},function(t,n){return D(e,t,n)},function(){return p(e).inspect()})}function O(e,t,n){return p(e).spread(t,n)}function E(e){return function(){function t(e,t){var a;if("undefined"==typeof StopIteration){try{a=r[e](t)}catch(u){return q(u)}return a.done?a.value:v(a.value,o,i)}try{a=r[e](t)}catch(u){return n(u)?u.value:q(u)}return v(a,o,i)}var r=e.apply(this,arguments),o=t.bind(t,"next"),i=t.bind(t,"throw");return o()}}function P(e){p.done(p.async(e)())}function C(e){throw new U(e)}function T(e){return function(){return O([this,F(arguments)],function(t,n){return e.apply(t,n)})}}function D(e,t,n){return p(e).dispatch(t,n)}function F(e){return v(e,function(e){var t=0,n=f();return Q(e,function(r,o,i){var a;y(o)&&"fulfilled"===(a=o.inspect()).state?e[i]=a.value:(++t,v(o,function(r){e[i]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function N(e){return v(e,function(e){return e=W(e,p),v(F(W(e,function(e){return v(e,H,H)})),function(){return e})})}function M(e){return p(e).allSettled()}function X(e,t){return p(e).then(void 0,void 0,t)}function z(e,t){return p(e).nodeify(t)}var L=!1;try{throw new Error}catch(I){L=!!I.stack}var $,U,B=s(),H=function(){},V=function(){function e(){for(;t.next;){t=t.next;var n=t.task;t.task=void 0;var o=t.domain;o&&(t.domain=void 0,o.enter());try{n()}catch(a){if(i)throw o&&o.exit(),setTimeout(e,0),o&&o.enter(),a;setTimeout(function(){throw a},0)}o&&o.exit()}r=!1}var t={task:void 0,next:null},n=t,r=!1,o=void 0,i=!1;if(V=function(e){n=n.next={task:e,domain:i&&process.domain,next:null},r||(r=!0,o())},"undefined"!=typeof process&&process.nextTick)i=!0,o=function(){process.nextTick(e)};else if("function"==typeof setImmediate)o="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){o=u,a.port1.onmessage=e,e()};var u=function(){a.port2.postMessage(0)};o=function(){setTimeout(e,0),u()}}else o=function(){setTimeout(e,0)};return V}(),K=Function.call,J=e(Array.prototype.slice),Q=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(t=e(t,this[n],n));return t}),G=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),W=e(Array.prototype.map||function(e,t){var n=this,r=[];return Q(n,function(o,i,a){r.push(e.call(t,i,a,n))},void 0),r}),Z=Object.create||function(e){function t(){}return t.prototype=e,new t},Y=e(Object.prototype.hasOwnProperty),et=Object.keys||function(e){var t=[];for(var n in e)Y(e,n)&&t.push(n);return t},tt=e(Object.prototype.toString);U="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var nt="From previous event:";p.resolve=p,p.nextTick=V,p.longStackSupport=!1,p.defer=f,f.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):e.resolve(arguments.length>2?J(arguments,1):n)}},p.Promise=l,p.promise=l,l.race=d,l.all=F,l.reject=q,l.resolve=p,p.passByCopy=function(e){return e},h.prototype.passByCopy=function(){return this},p.join=function(e,t){return p(e).join(t)},h.prototype.join=function(e){return p([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(e,t,n){function o(t){try{return"function"==typeof e?e(t):t}catch(n){return q(n)}}function i(e){if("function"==typeof t){r(e,u);try{return t(e)}catch(n){return q(n)}}return q(e)}function a(e){return"function"==typeof n?n(e):e}var u=this,s=f(),c=!1;return V(function(){u.promiseDispatch(function(e){c||(c=!0,s.resolve(o(e)))},"when",[function(e){c||(c=!0,s.resolve(i(e)))}])}),u.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=a(e)}catch(r){if(n=!0,!p.onerror)throw r;p.onerror(r)}n||s.notify(t)}]),s.promise},p.when=v,h.prototype.thenResolve=function(e){return this.then(function(){return e})},p.thenResolve=function(e,t){return p(e).thenResolve(t)},h.prototype.thenReject=function(e){return this.then(function(){throw e})},p.thenReject=function(e,t){return p(e).thenReject(t)},p.nearer=m,p.isPromise=y,p.isPromiseAlike=g,p.isPending=x,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=b,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=j,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],ot=[],it=!0;p.resetUnhandledRejections=w,p.getUnhandledReasons=function(){return rt.slice()},p.stopUnhandledRejectionTracking=function(){w(),it=!1},w(),p.reject=q,p.fulfill=R,p.master=A,p.spread=O,h.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},p.async=E,p.spawn=P,p["return"]=C,p.promised=T,p.dispatch=D,h.prototype.dispatch=function(e,t){var n=this,r=f();return V(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},p.get=function(e,t){return p(e).dispatch("get",[t])},h.prototype.get=function(e){return this.dispatch("get",[e])},p.set=function(e,t,n){return p(e).dispatch("set",[t,n])},h.prototype.set=function(e,t){return this.dispatch("set",[e,t])},p.del=p["delete"]=function(e,t){return p(e).dispatch("delete",[t])},h.prototype.del=h.prototype["delete"]=function(e){return this.dispatch("delete",[e])},p.mapply=p.post=function(e,t,n){return p(e).dispatch("post",[t,n])},h.prototype.mapply=h.prototype.post=function(e,t){return this.dispatch("post",[e,t])},p.send=p.mcall=p.invoke=function(e,t){return p(e).dispatch("post",[t,J(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(e){return this.dispatch("post",[e,J(arguments,1)])},p.fapply=function(e,t){return p(e).dispatch("apply",[void 0,t])},h.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},p["try"]=p.fcall=function(e){return p(e).dispatch("apply",[void 0,J(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,J(arguments)])},p.fbind=function(e){var t=p(e),n=J(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(J(arguments))])}},h.prototype.fbind=function(){var e=this,t=J(arguments);return function(){return e.dispatch("apply",[this,t.concat(J(arguments))])}},p.keys=function(e){return p(e).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=F,h.prototype.all=function(){return F(this)},p.allResolved=c(N,"allResolved","allSettled"),h.prototype.allResolved=function(){return N(this)},p.allSettled=M,h.prototype.allSettled=function(){return this.then(function(e){return F(W(e,function(e){function t(){return e.inspect()}return e=p(e),e.then(t,t)}))})},p.fail=p["catch"]=function(e,t){return p(e).then(void 0,t)},h.prototype.fail=h.prototype["catch"]=function(e){return this.then(void 0,e)},p.progress=X,h.prototype.progress=function(e){return this.then(void 0,void 0,e)},p.fin=p["finally"]=function(e,t){return p(e)["finally"](t)},h.prototype.fin=h.prototype["finally"]=function(e){return e=p(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},p.done=function(e,t,n,r){return p(e).done(t,n,r)},h.prototype.done=function(e,t,n){var o=function(e){V(function(){if(r(e,i),!p.onerror)throw e;p.onerror(e)})},i=e||t||n?this.then(e,t,n):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},p.timeout=function(e,t,n){return p(e).timeout(t,n)},h.prototype.timeout=function(e,t){var n=f(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},p.delay=function(e,t){return void 0===t&&(t=e,e=void 0),p(e).delay(t)},h.prototype.delay=function(e){return this.then(function(t){var n=f();return setTimeout(function(){n.resolve(t)},e),n.promise})},p.nfapply=function(e,t){return p(e).nfapply(t)},h.prototype.nfapply=function(e){var t=f(),n=J(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},p.nfcall=function(e){var t=J(arguments,1);return p(e).nfapply(t)},h.prototype.nfcall=function(){var e=J(arguments),t=f();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},p.nfbind=p.denodeify=function(e){var t=J(arguments,1);return function(){var n=t.concat(J(arguments)),r=f();return n.push(r.makeNodeResolver()),p(e).fapply(n).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var e=J(arguments);return e.unshift(this),p.denodeify.apply(void 0,e)},p.nbind=function(e,t){var n=J(arguments,2);return function(){function r(){return e.apply(t,arguments)}var o=n.concat(J(arguments)),i=f();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var e=J(arguments,0);return e.unshift(this),p.nbind.apply(void 0,e)},p.nmapply=p.npost=function(e,t,n){return p(e).npost(t,n)},h.prototype.nmapply=h.prototype.npost=function(e,t){var n=J(t||[]),r=f();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(e,t){var n=J(arguments,2),r=f();return n.push(r.makeNodeResolver()),p(e).dispatch("post",[t,n]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(e){var t=J(arguments,1),n=f();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},p.nodeify=z,h.prototype.nodeify=function(e){return e?void this.then(function(t){V(function(){e(null,t)})},function(t){V(function(){e(t)})}):this};var at=s();return p}),define("__jquery-meta-data/helpers",["require","exports","module","jquery","lodash"],function(e,t){e("jquery"),e("lodash"),t.buildPrefixRegExp=function(e){return new RegExp("^"+e+"([A-Z$_].*$)")},t.lowercaseFirst=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.uppercaseFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.fullKey=function(e,n){return e?e+t.uppercaseFirst(n):n}}),define("__jquery-meta-data/read",["require","exports","module","lodash","./helpers"],function(e,t){function n(e){return e}var r=e("lodash"),o=e("./helpers");t.all=function(e,t){var i=e.data(),a=t.parse||n;if(t.prefix){var u=o.buildPrefixRegExp(t.prefix);return r.transform(i,function(n,r,i){var s=i.match(u);if(s){var c=o.lowercaseFirst(s[1]);r=a(r,c,i),t.replace&&e.data(i,r),n[c]=r}})}return r.mapValues(i,function(e,t){return a(e,t,t)})},t.single=function(e,t,n){var r=o.fullKey(t.prefix,n),i=e.data(r);return t.parse&&(i=t.parse(i,n,r),t.replace&&e.data(r,i)),i}}),define("__jquery-meta-data/set",["require","exports","module","lodash","./helpers"],function(e,t){var n=e("lodash"),r=e("./helpers");t.single=function(e,t,n,o){var i=r.fullKey(t.prefix,n);o=t.stringify?t.stringify(o,n,i):o,e.data(i,o)},t.multiple=function(e,r,o){n.each(o,function(n,o){t.single(e,r,o,n)})}}),define("jquery-meta-data",["require","exports","module","jquery","lodash","./__jquery-meta-data/read","./__jquery-meta-data/set"],function(e){var t=e("jquery"),n=e("lodash"),r=e("./__jquery-meta-data/read"),o=e("./__jquery-meta-data/set"),i={};t.metaData=function(){n.isObject(arguments[0])?n.assign(i,arguments[0]):i[arguments[0]]=arguments[1]},t.prototype.metaData=function(e){return e=n.isString(e)?i[e]:e,1===arguments.length?r.all(this,e):2!==arguments.length?(o.single(this,e,arguments[1],arguments[2]),this):n.isString(arguments[1])?r.single(this,e,arguments[1]):n.isObject(arguments[1])?(o.multiple(this,e,arguments[1]),this):void 0}}),define("_q",["require","exports","module","lodash","q"],function(e,t){function n(){var e=a.map.apply(a,arguments);return u.all(e)}function r(e){var t=a.keys(e),n=a.map.apply(a,arguments);return u.all(n).then(function(e){return a.zipObject(t,e)})}function o(e,t,n){return a.reduce(e,function(e,n,r){return e.then(function(e){return t(e,n,r)})},u(n))}function i(e,t,n){return a.reduce(e,function(e,r,o){return e.then(a.bind(a.partial(t,r,o),n))},u())}var a=e("lodash"),u=e("q");t.map=n,t.mapValues=r,t.each=i,t.reduce=o}),define("__scope/iteration",["require","exports","module","lodash"],function(e,t){var n=e("lodash");t.each=function(){var e,t,r;if(n.isFunction(arguments[0])){t=arguments[0],r=arguments[1];for(var o in this)t.call(r,this[o],o)}else if(e=arguments[0],t=arguments[1],r=arguments[2],n.isRegExp(e))for(var o in this)e.test(this[o])&&t.call(r,this[o],o);else n.isArray(e)&&n.each(e,function(e){t.call(r,this[e],e)});return this},t.eachOwn=function(){var e,t,r;return n.isFunction(arguments[0])?(t=arguments[0],r=arguments[1],n.each(this,t,r)):(e=arguments[0],t=arguments[1],r=arguments[2],n.isRegExp(e)?n.each(this,function(n,o){e.test(o)&&t.call(r,n,o)}):n.isArray(e)&&n.each(e,function(e){this.hasOwnProperty(e)&&t.call(r,this[e],e)},this)),this}}),define("__scope/evaluation/string/parse",["require","exports","module","lodash"],function(e,t,n){function r(e){var t={};if(e[1])t.type="literal",t.value=e[1];else if(e[2]){var n=e[2];t.type="this"===n?"special":"evaluated",t.value=n}else e[3]?(t.type="array",t.value=a(e[3])):e[4]&&(t.type="object",t.value=i(e[4]));return t}function o(e){var t=e.match(d);return r(t)}function i(e){for(var t,n={},r=new RegExp(h,"g");t=r.exec(e);)t[1]?n[t[1]]={type:"evaluated",value:t[1]}:t[2]&&(n[t[2]]=o(t[3]));return n}function a(e){for(var t,n=[],o=new RegExp(v,"g");t=o.exec(e);)n.push(r(t));return n}var u=(e("lodash"),"\\s*"),s="([^$[{,\\s]+)",c="\\$([^,]+)?",p="\\["+u+"(.*?)"+u+"\\](?!.*?\\])",f="\\{"+u+"(.*?)"+u+"\\}(?!.*?\\})",l=[u+"(?:",s,"|",c,"|",p,"|",f,")"+u].join(""),d=new RegExp(l),h=[u+"(?:",c+u+"(?:,|$)|","(?:",s+u,":"+u,"(.*?)"+u+"(?:,(?!.*?})|$)",")",")"].join(""),v=l+"(?:,|$)";n.exports=o}),define("__scope/evaluation/string/index",["require","exports","module","lodash","deep","./parse"],function(e,t,n){function r(e,t,n){var r;return"literal"===t.type?r=t.value:"evaluated"===t.type?r=s.get(e,t.value):"array"===t.type?r=i(e,t.value,n):"object"===t.type?r=o(e,t.value,n):"special"===t.type&&"this"===t.value&&(r=e),r}function o(e,t,n){var o={};return u.each(t,function(t,i){o[i]=r(e,t,n)}),o}function i(e,t,n){var o=[];return u.each(t,function(t){o.push(r(e,t,n))},e),o}function a(e,t,n){return t=c(t),r(e,t,n)}var u=e("lodash"),s=e("deep"),c=e("./parse");n.exports=a}),define("__scope/evaluation/array",["require","exports","module","lodash"],function(e,t,n){function r(e,t,n){var r={};return n.own?i.each(t,function(t){r[t]=i.isString(t)&&e.hasOwnProperty(t)?e[t]:e.evaluateOwn(t,n)}):i.each(t,function(t){r[t]=i.isString(t)?e[t]:e.evaluate(t,n)}),r}function o(e,t,n){return n.own?i.map(t,function(t){return i.isString(t)&&e.hasOwnProperty(t)?e[t]:e.evaluateOwn(t,n)}):i.map(t,function(t){return i.isString(t)?e[t]:e.evaluate(t,n)})}var i=e("lodash");n.exports=function(e,t,n){return n&&"object"===n.format?r(e,t,n):o(e,t,n)}}),define("__scope/evaluation/object",["require","exports","module","lodash"],function(e,t,n){var r=e("lodash");n.exports=function(e,t,n){var o={};return n.own?r.each(t,function(t,n){e.hasOwnProperty(n)&&(o[n]=e[n])}):r.each(t,function(t,n){o[n]=e[n]}),r.defaults(o,t),o}}),define("__scope/evaluation/regexp",["require","exports","module","lodash"],function(e,t,n){e("lodash"),n.exports=function(e,t,n){var r={};return n.own?e.eachOwn(function(e,n){t.test(n)&&(r[n]=e)}):e.each(function(e,n){t.test(n)&&(r[n]=e)}),r}}),define("__scope/evaluation/index",["require","exports","module","lodash","./string/index","./array","./object","./regexp"],function(e,t){var n=e("lodash"),r=e("./string/index"),o=e("./array"),i=e("./object"),a=e("./regexp");t.evaluate=function(e,t){return t=t||{},n.isArray(e)?o(this,e,t):n.isRegExp(e)?a(this,e,t):n.isObject(e)?i(this,e,t):n.isString(e)?r(this,e,t):e}}),define("__scope/invocation",["require","exports","module","lodash"],function(e,t){var n=e("lodash");t.invoke=function(e,t){if(n.isString(e)&&(e=this[e],!n.isFunction(e)))throw new Error("scope invoke error: fn "+e+" not a function.");if(!n.isFunction(e))throw new TypeError("scope invoke error: "+e+" is not a function.");var r=this.evaluate(t);return r=n.isArray(r)?r:[r],e.apply(this,r.concat(Array.prototype.slice.call(arguments,2)))},t.partial=function(e,t){return t=t||[],n.partial(this.invoke,e,t)},t.fn=function(){return n.isObject(arguments[0])?n.each(arguments[0],function(e,t){this.fn(t,e.fn,e.args)},this):this[arguments[0]]=this.partial(arguments[1],arguments[2]),this}}),define("scope",["require","exports","module","lodash","subject","./__scope/iteration","./__scope/evaluation/index","./__scope/invocation"],function(e,t,n){var r=e("lodash"),o=e("subject"),i={enumerable:!1},a={enumerable:!1,writable:!1},u=n.exports=o({initialize:function(e,t){this.assign(e,t)}},i);u.proto({create:function(e,t){var n=o.assign(r.create(this),e,t);return o.assign(n,{parentScope:this},i),n},assign:function(){var e,t;return r.isString(arguments[0])?(e={}[arguments[0]]=arguments[1],t=arguments[2]):r.isObject(arguments[0])&&(e=arguments[0],t=arguments[1]),o.assign(this,e,t),this}},a),u.assignProto(e("./__scope/iteration"),a).assignProto(e("./__scope/evaluation/index"),i).assignProto(e("./__scope/invocation"),i)}),define("__archetypo/parse/value",["require","exports","module"],function(e,t,n){function r(e){return"["+e+"]"}function o(e){var t={};return e?e[2]?(t.type="invocation",t.priority=""===e[1]?"0":e[1],t.method=e[2],t.value=r(e[3])):e[4]&&(t.type="value",t.priority=e[1],t.value=e[4]):t.type="empty",t}var i="\\s*",a="(?:(\\d*)!)?",u="([\\w$.\\-/]*)",s=":"+i+"(.*)"+i,c=["^",i,a,i,"(?:",u,i,s,"|","(.*?)",")",i,"$"].join(""),p=new RegExp(c);n.exports=function(e){if(_.isString(e)){e=e.replace(/\n/g,"");var t=e.match(p);return o(t)}return{type:"value",value:e}}}),define("__archetypo/build/data",["require","exports","module","lodash","jquery-meta-data","../parse/value"],function(e,t,n){var r=(e("lodash"),e("jquery-meta-data"),e("../parse/value"));n.exports=function(e,t){return e.metaData({prefix:t.namespace,parse:r,replace:!1})}}),define("__archetypo/auxiliary",["require","exports","module","lodash"],function(e,t){e("lodash"),t.camelCase=function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},t.closestAncestor=function(e,t){return e.parent().closest(t)}}),define("__archetypo/build/evaluation/invoke",["require","exports","module","q","deep","../../auxiliary"],function(e,t,n){function r(e,t){var n=e.evaluate("$"+i.camelCase(t));return _.isFunction(n)?o(n):e.load(t)}var o=e("q"),i=(e("deep"),e("../../auxiliary"));n.exports=function(e,t){return r(e,t.method).then(function(n){var r=e.evaluate(t.value),i=n.apply(e,r);return o.isPromise(i)?i:o(i)})}}),define("__archetypo/build/evaluation/index",["require","exports","module","lodash","q","_q","./invoke"],function(e,t,n){function r(e,t){var n=a.reduce(t,function(t,n,r){return"value"===n.type&&(t[r]=e.evaluate(n.value)),t},{});e.assign(n);var r=a.pick(t,function(e){return"invocation"===e.type});return s.mapValues(r,function(t,n){return c(e,t,n)}).then(function(t){return e.assign(t),e})}function o(e,t){var n=a.unique(a.pluck(t,"priority")).sort(function(e,t){return e-t}),o=a.map(n,function(n){var o=a.pick(t,function(e){return e.priority===n});return a.partial(r,e,o)});return o}function i(e){return a.reduce(e,function(e,t){return e.then(t)},u())}var a=e("lodash"),u=e("q"),s=e("_q"),c=e("./invoke");n.exports=function(e,t,n){var r=o(t,n),s=e?e.data("archetypo-evaluation-promise"):u(!0);return s.then(a.partial(i,r))}}),define("__archetypo/arch-scope/methods",["require","exports","module","lodash","q","deep","scope"],function(e,t){var n=e("lodash"),r=e("q"),o=e("deep");e("scope"),t.load=function(t,i){var a=r.defer();return n.isString(t)?i?e([t],function(e){a.resolve(o.get(e,i))},a.reject):e([t],a.resolve,a.reject):n.isArray(t)&&e(t,function(){var e=n.toArray(arguments);a.resolve(i?n.map(e,function(e){return o.get(e,i)}):e)},a.reject),a.promise},t.l=t.load}),define("__archetypo/arch-scope/index",["require","exports","module","jquery","scope","./methods"],function(e,t,n){var r=e("jquery"),o=e("scope"),i={enumerable:!1},a=n.exports=o.extend();a.assignProto(e("./methods"),i),r.prototype.archetypo=function(){var e=this.data("archetypo");return e?e:a({el:this})}}),define("__archetypo/build/scope",["require","exports","module","../arch-scope/index","../auxiliary"],function(e,t,n){var r=e("../arch-scope/index");e("../auxiliary"),n.exports=function(e,t,n,o){var o=o||{};o.el=t;var i;if(e&&0!==e.length){var a=e.data("archetypo");i=a?e.data("archetypo").create(o):r(o)}else i=r(o);return i}}),define("archetypo",["require","exports","module","jquery","lodash","q","./__archetypo/build/data","./__archetypo/build/evaluation/index","./__archetypo/build/scope","./__archetypo/auxiliary"],function(e,t,n){function r(e,t){var n=e.find(t.selector),r=a.map(n,function(e){return o(i(e),null,t),i(e).data("archetypo-evaluation-promise")});return u.all(r)}function o(e,t,n){var o=e.data("archetypo-promise");if(!o){n=n||{},a.defaults(n,l),n.selector=a.isFunction(n.selector)?n.selector(n.namespace):n.selector,n.rootSelector=a.isFunction(n.rootSelector)?n.rootSelector(n.namespace):n.rootSelector;var i;if(!e.is(n.rootSelector)){var i=f.closestAncestor(e,n.selector);i=1===i.length?i:void 0}var u=s(e,n),d=p(i,e,n,t);e.data("archetypo",d);var h=c(i,d,u);e.data("archetypo-evaluation-promise",h);var o=r(e,n).then(function(){return d});e.data("archetypo-promise",o)}return o}var i=e("jquery"),a=e("lodash"),u=e("q"),s=e("./__archetypo/build/data"),c=e("./__archetypo/build/evaluation/index"),p=e("./__archetypo/build/scope"),f=e("./__archetypo/auxiliary"),l={namespace:"arch",selector:function(e){return"[data-"+e+"]"},rootSelector:function(e){return"[data-"+e+"-root]"}};o.setDefaults=function(e,t){a.isObject(e)?a.each(e,function(e,t){l[t]=e}):l[e]=t},n.exports=o}),define("text",["module"],function(e){var t,n,r,o,i,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,p=c&&location.protocol&&location.protocol.replace(/\:/,""),f=c&&location.hostname,l=c&&(location.port||void 0),d={},h=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(r){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,r,o=!1,i=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!a||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,r=n||t,i=r.indexOf("!"),-1!==i&&(o="strip"===r.substring(i+1),r=r.substring(0,i),n?n=r:t=r),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,o){var i,a,u,s=t.xdRegExp.exec(e);return s?(i=s[2],a=s[3],a=a.split(":"),u=a[1],a=a[0],!(i&&i!==n||a&&a.toLowerCase()!==r.toLowerCase()||(u||a)&&u!==o)):!0},finishLoad:function(e,n,r,o){r=n?t.strip(r):r,h.isBuild&&(d[e]=r),o(r)},load:function(e,n,r,o){if(o&&o.isBuild&&!o.inlineText)return void r();h.isBuild=o&&o.isBuild;var i=t.parseName(e),a=i.moduleName+(i.ext?"."+i.ext:""),u=n.toUrl(a),s=h.useXhr||t.useXhr;return 0===u.indexOf("empty:")?void r():void(!c||s(u,p,f,l)?t.get(u,function(n){t.finishLoad(e,i.strip,n,r)},function(e){r.error&&r.error(e)}):n([a],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,r)}))},write:function(e,n,r){if(d.hasOwnProperty(n)){var o=t.jsEscape(d[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,o,i){var a=t.parseName(n),u=a.ext?"."+a.ext:"",s=a.moduleName+u,c=r.toUrl(a.moduleName+u)+".js";t.load(s,r,function(){var n=function(e){return o(c,e)};n.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,s,n,i)},i)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var o=n.readFileSync(e,"utf8");0===o.indexOf("ï»¿")&&(o=o.substring(1)),t(o)}catch(i){r&&r(i)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,o){var i,a=t.createXhr();if(a.open("GET",e,!0),o)for(i in o)o.hasOwnProperty(i)&&a.setRequestHeader(i.toLowerCase(),o[i]);h.onXhr&&h.onXhr(a,e),a.onreadystatechange=function(){var t,o;4===a.readyState&&(t=a.status||0,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=a,r&&r(o)):n(a.responseText),h.onXhrComplete&&h.onXhrComplete(a,e))},a.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,o="utf-8",i=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),o)),s="";try{for(n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=u.readLine());)n.append(a),n.append(r);s=String(n.toString())}finally{u.close()}t(s)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,a,u,s={};i&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(u,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),a.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),s),a.close(),n.close(),t(s.value)}catch(c){throw new Error((u&&u.path||"")+": "+c)}}),t}),define("text!os-case-editor/html/index.html",[],function(){return'<div class="container">\n\n	<div class="row">\n\n		<!-- the case data view -->\n		<div\n			class="col-md-3 case-data"\n\n			data-os\n			data-os-model="!load: os-case-editor/docks/case"\n			data-os-view =" bbmv: $this"\n		>\n			<input data-bind-name="value" placeholder="Case name">\n			<input data-bind-author="value" placeholder="Author">\n\n			<textarea data-bind-description="value"></textarea>\n\n			<button data-bind-on-click="save">Save</button>\n		</div>\n\n		<!-- collection of case tech stacks -->\n		<div class="col-md-6 case-stacks">\n			<h1>Technology stacks used: </h1>\n		</div>\n\n	</div>\n\n</div>\n'}),define("dock",["require","exports","module","lodash","subject"],function(e,t,n){var r=e("lodash"),o=e("subject"),i=n.exports=o({initialize:function(e){this.initializeDock(e)}});i.assignProto({initializeDock:function(e){e&&e[this.attachmentAttribute]&&this.attach(e[this.attachmentAttribute])},attach:function(e,t){return this.detach(t),this.beforeAttach(e,t),this[this.attachmentAttribute]=e,this.afterAttach(e,t),this},detach:function(e){var t=this[this.attachmentAttribute];return t&&(this.beforeDetach(t,e),delete this[this.attachmentAttribute],this.afterDetach(t,e)),this}},{writable:!1,enumerable:!1}),i.assignProto({attachmentAttribute:"attachment",beforeAttach:r.noop,afterAttach:r.noop,beforeDetach:r.noop,afterDetach:r.noop}),i.assignStatic({defineProxies:function(e){return this.assignProto(e,{get:function(e){var t=this[this.attachmentAttribute],n=t[e];
return r.isFunction(n)?r.bind(n,t):n},set:function(e,t){this[this.attachmentAttribute][e]=t}}),this},extendProxies:function(e){var t=this.extend();return t.defineProxies(e),t}})}),define("__bb-dock/base",["require","exports","module","dock","backbone"],function(e,t,n){var r=e("dock"),o=e("backbone"),i=n.exports=r.extend({afterAttach:function(e,t){this.listenTo(e,"all",this.trigger),t&&t.silent||this.trigger("attach",e,t)},afterDetach:function(e,t){this.stopListening(e,"all"),t&&t.silent||this.trigger("detach",e,t)}});i.assignProto(o.Events)}),define("bb-dock",["require","exports","module","backbone","lodash","./__bb-dock/base"],function(e,t){var n=e("backbone"),r=e("lodash"),o=e("./__bb-dock/base"),i=t.model=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.initializeModelDock(e)},initializeModelDock:function(e){this.model||this.attach(new n.Model),this.on("attach",r.partial(this.trigger,"change",this,e),this)},attachmentAttribute:"model"});i.defineProxies(["get","set","escape","has","unset","clear","toJSON","sync","fetch","save","destroy","keys","values","pairs","invert","pick","omit","validate","isValid","url","parse","clone","isNew","hasChanged","changedAttributes","previous","previousAttributes"]),i.defineProxies(["id","idAttribute","cid","attributes","changed","defaults","validationError","urlRoot"]);var a=t.collection=o.extend({initialize:function(e){o.prototype.initialize.call(this,e),this.initializeCollectionDock(e)},initializeCollectionDock:function(e){this.collection||this.attach(new n.Collection),this.on("attach",r.partial(this.trigger,"reset",this,e),this)},attachmentAttribute:"collection"});a.defineProxies(["toJSON","sync","add","remove","reset","set","get","at","push","pop","unshift","shift","slice","sort","pluck","where","findWhere","parse","clone","fetch","create","forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"])}),define("os-case-editor/docks/case",["require","exports","module","bb-dock"],function(e,t,n){var r=e("bb-dock");n.exports=r.model()}),define("os-case-editor",["require","exports","module","jquery","archetypo","bbmv","text!os-case-editor/html/index.html","os-case-editor/docks/case"],function(e,t,n){var r=e("jquery"),o=e("archetypo"),i=(e("bbmv"),e("text!os-case-editor/html/index.html")),a=e("os-case-editor/docks/case");n.exports=function(e){if(!e.el)throw new Error("No element defined for initOsCaseEditor");if(!e["case"])throw new Error("No case defined for the case editor");var t=r(i);e.el.append(t),o(t,{},{namespace:"os"}),a.attach(e["case"])}});